{% if section.settings.enable %}
  <style data-custom-fonts>
    {% assign items = section.blocks %}

    {% for block in items %}
      {% assign name = block.settings.name %}
      {% assign url = block.settings.custom_font_url %}
      {% assign custom_font_weight = block.settings.custom_font_weight %}
      {% assign customFontStyle = block.settings.custom_font_style %}

      {% if url != blank and url != "" %}
        {% capture _font_type %}
          {% if url contains ".otf" %}
            opentype
          {% elsif url contains ".ttf" %}
            truetype
          {% elsif url contains ".svg" %}
            svg
          {% elsif url contains ".woff2" %}
            woff2
          {% else %}
            woff
          {% endif %}
        {% endcapture %}

        {% assign font_type = _font_type | strip %}
        
        @font-face {
          font-family: '{{ name }}';
          src: url({{ url }}) format('{{ font_type }}');
          {% if customFontStyle != 'none' %}
            font-style: {{ customFontStyle }};
          {% endif %}
          {% if custom_font_weight != 'none' %}
            font-weight: {{ custom_font_weight }};
          {% endif %}
        }

        /* Apply font to selected elements */
        {% if block.settings.apply_h1 %}
          h1 { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_h2 %}
          h2 { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_h3 %}
          h3 { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_h4 %}
          h4 { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_h5 %}
          h5 { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_h6 %}
          h6 { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_p %}
          p { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_a %}
          a { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_input %}
          input { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_label %}
          label { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_legend %}
          legend { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_button %}
          button { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_summary %}
          summary { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_select %}
          select { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_option %}
          option { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_small %}
          small { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_span %}
          span { font-family: '{{ name }}' !important; }
        {% endif %}
        {% if block.settings.apply_custom != "" and block.settings.apply_custom != blank %}
          {{ block.settings.apply_custom }} { font-family: '{{ name }}' !important; }
        {% endif %}
      {% endif %}
    {% endfor %}
  </style>
{% endif %}
{
  "name": "Custom Font Picker",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable",
      "label": "Enable Custom Fonts",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "Font",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Font Name",
          "default": "Custom Font"
        },
        {
          "type": "url",
          "id": "custom_font_url",
          "label": "Custom Font URL"
        },
        {
          "type": "select",
          "id": "custom_font_style",
          "label": "Font Style",
          "options": [
            { "value": "normal", "label": "Normal" },
            { "value": "italic", "label": "Italic" }
          ],
          "default": "normal"
        },
        {
          "type": "number",
          "id": "custom_font_weight",
          "label": "Font Weight",
          "default": 400
        },
        {
          "type": "checkbox",
          "id": "apply_h1",
          "label": "Apply to H1",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_h2",
          "label": "Apply to H2",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_h3",
          "label": "Apply to H3",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_h4",
          "label": "Apply to H4",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_h5",
          "label": "Apply to H5",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_h6",
          "label": "Apply to H6",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_span",
          "label": "Apply to <span> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_p",
          "label": "Apply to <p> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_a",
          "label": "Apply to <a> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_input",
          "label": "Apply to <input> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_label",
          "label": "Apply to <label> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_legend",
          "label": "Apply to <legend> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_button",
          "label": "Apply to <button> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_summary",
          "label": "Apply to <summary> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_select",
          "label": "Apply to <select> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_option",
          "label": "Apply to <option> tags",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "apply_small",
          "label": "Apply to <small> tags",
          "default": false
        },
        {
          "type": "textarea",
          "id": "apply_custom",
          "label": "Custom CSS Selector",
          "info": "Apply custom font to CSS selectors"
        }
      ]
    }
  ]
}
